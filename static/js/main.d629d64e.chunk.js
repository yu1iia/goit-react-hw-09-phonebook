(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{107:function(e,t,r){},108:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(27),s=r.n(a),u=r(15),o=r(8),i=r(50),b=r(6),l=r(9),j=r(24),d=r.n(j),O=r(1);function f(){var e=Object(o.c)(l.c.getIsAuthenticated);return Object(O.jsxs)("nav",{children:[Object(O.jsx)(u.b,{to:"/",exact:!0,className:d.a.link,activeClassName:d.a.activeLink,children:"HOME"}),e&&Object(O.jsx)(u.b,{to:"/contacts",exact:!0,className:d.a.link,activeClassName:d.a.activeLink,children:"CONTACTS"})]})}f.defaultProps={isLoggedIn:!1};var h=r.p+"static/media/default-avatar.f3869fdf.png",g=r(25),p=r.n(g);function v(){var e=Object(o.c)(l.c.getUsername),t=Object(o.b)(),r=Object(n.useCallback)((function(){return t(l.a.logOut())}),[t]);return Object(O.jsxs)("div",{className:p.a.container,children:[Object(O.jsx)("img",{src:h,alt:"",width:"32",className:p.a.avatar}),Object(O.jsxs)("span",{className:p.a.name,children:["WELCOME, ",e]}),Object(O.jsx)("button",{className:p.a.button,type:"button",onClick:r,children:"LOGOUT"})]})}var x=r(26),C=r.n(x);function m(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(u.b,{to:"/register",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"SIGN UP"}),Object(O.jsx)(u.b,{to:"/login",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"LOG IN"})]})}var k=r(51),S=r.n(k);function E(){var e=Object(o.c)(l.c.getIsAuthenticated);return Object(O.jsxs)("header",{className:S.a.header,children:[Object(O.jsx)(f,{}),e?Object(O.jsx)(v,{}):Object(O.jsx)(m,{})]})}var _=r(37),y=r(20),N=r(31);function U(e){var t=e.children,r=(e.isAuthenticated,e.redirectTo),n=Object(N.a)(e,["children","isAuthenticated","redirectTo"]),c=Object(o.c)(l.c.getIsAuthenticated);return Object(O.jsx)(b.b,Object(y.a)(Object(y.a)({},n),{},{children:c?t:Object(O.jsx)(b.a,{to:r})}))}function R(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(N.a)(e,["isAuthenticated","redirectTo","children"]),c=Object(o.c)(l.c.getIsAuthenticated);return Object(O.jsx)(b.b,Object(y.a)(Object(y.a)({},n),{},{children:c&&n.restricted?Object(O.jsx)(b.a,{to:t}):r}))}var q=r(48),A=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,117))})),w=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,119))})),L=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,120))})),I=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,118))}));function T(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(l.a.getCurrentUser())}),[e]),Object(O.jsxs)(_.a,{children:[Object(O.jsx)(E,{}),Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)(q.a,{}),children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(R,{exact:!0,path:"/",children:Object(O.jsx)(A,{})}),Object(O.jsx)(R,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(O.jsx)(L,{})}),Object(O.jsx)(R,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(O.jsx)(w,{})}),Object(O.jsx)(U,{path:"/contacts",redirectTo:"/login",children:Object(O.jsx)(I,{})})]})})]})}var z,M,F=r(30),J=r(2),B=r(18),G=r(55),P=r.n(G),D=r(3),V=r(7),H=r(16),W=H.a.addContactRequest,X=H.a.addContactSuccess,Z=H.a.addContactError,K=H.a.deleteContactRequest,Q=H.a.deleteContactSuccess,Y=H.a.deleteContactError,$=H.a.fetchContactRequest,ee=H.a.fetchContactSuccess,te=H.a.fetchContactError,re=Object(J.c)([],(z={},Object(D.a)(z,ee,(function(e,t){return t.payload})),Object(D.a)(z,X,(function(e,t){return[t.payload].concat(Object(F.a)(e))})),Object(D.a)(z,Q,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),z)),ne=Object(J.c)("",Object(D.a)({},H.a.changeFilter,(function(e,t){return t.payload}))),ce=Object(J.c)(!1,(M={},Object(D.a)(M,W,(function(){return!0})),Object(D.a)(M,X,(function(){return!1})),Object(D.a)(M,Z,(function(){return!1})),Object(D.a)(M,Q,(function(){return!1})),Object(D.a)(M,K,(function(){return!0})),Object(D.a)(M,Y,(function(){return!1})),Object(D.a)(M,$,(function(){return!0})),Object(D.a)(M,ee,(function(){return!1})),Object(D.a)(M,te,(function(){return!1})),M)),ae=Object(J.c)(null,{}),se=Object(V.c)({items:re,filter:ne,loading:ce,error:ae}),ue=Object(F.a)(Object(J.d)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),oe={key:"auth",storage:P.a,whitelist:["token"]},ie=Object(J.a)({reducer:{auth:Object(B.g)(oe,l.b),contacts:se},middleware:ue,devTools:!1}),be={store:ie,persistor:Object(B.h)(ie)};r(106),r(107);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(o.a,{store:be.store,children:Object(O.jsx)(i.a,{loading:null,persistor:be.persistor,children:Object(O.jsx)(u.a,{children:Object(O.jsx)(T,{})})})})}),document.getElementById("root"))},16:function(e,t,r){"use strict";var n=r(2),c=Object(n.b)("fetchContactRequest"),a=Object(n.b)("fetchContactSuccess"),s=Object(n.b)("fetchContactError"),u={addContactRequest:Object(n.b)("addContactRequest"),addContactSuccess:Object(n.b)("addContactSuccess"),addContactError:Object(n.b)("addContactError"),deleteContactRequest:Object(n.b)("deleteContactRequest"),deleteContactSuccess:Object(n.b)("deleteContactSuccess"),deleteContactError:Object(n.b)("deleteContactError"),changeFilter:Object(n.b)("contacts/Filter"),fetchContactRequest:c,fetchContactSuccess:a,fetchContactError:s};t.a=u},24:function(e,t,r){e.exports={link:"Navigation_link__Jkma5",activeLink:"Navigation_activeLink__XFDxr"}},25:function(e,t,r){e.exports={container:"UserMenu_container__2V7i2",avatar:"UserMenu_avatar__13yZV",name:"UserMenu_name__3pLJ4",button:"UserMenu_button__2NIw0"}},26:function(e,t,r){e.exports={link:"AuthNav_link__1orUc",activeLink:"AuthNav_activeLink__2wyFi"}},37:function(e,t,r){"use strict";r(0);var n=r(52),c=r.n(n),a=r(1);t.a=function(e){var t=e.children;return Object(a.jsx)("div",{className:c.a.Container,children:t})}},48:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(0);var n=r(53),c=r.n(n),a=(r(103),r(54)),s=r.n(a),u=r(1),o=function(){return Object(u.jsx)("div",{className:s.a.loaderContainer,children:Object(u.jsx)(c.a,{type:"ThreeDots",color:"#9e9d9d",height:50,width:50,className:"loader",backgroundColor:"transparent",margin:"20 auto","text-align":"center",transition:"background-color 2s ease-out"})})}},51:function(e,t,r){e.exports={header:"AppBar_header__2p1I5"}},52:function(e,t,r){e.exports={Container:"Container_Container__13NIT"}},54:function(e,t,r){e.exports={loaderContainer:"Loader_loaderContainer__PkO0L"}},9:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return R})),r.d(t,"c",(function(){return q}));var n,c,a,s,u=r(2),o=Object(u.b)("auth/registerRequest"),i=Object(u.b)("auth/registerSuccess"),b=Object(u.b)("auth/registerError"),l=Object(u.b)("auth/loginRequest"),j=Object(u.b)("auth/loginSuccess"),d=Object(u.b)("auth/loginError"),O={registerRequest:o,registerSuccess:i,registerError:b,logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},f=r(3),h=r(7),g={name:null,email:null},p=Object(u.c)(g,(n={},Object(f.a)(n,O.registerSuccess,(function(e,t){return t.payload.user})),Object(f.a)(n,O.loginSuccess,(function(e,t){return t.payload.user})),Object(f.a)(n,O.logoutSuccess,(function(){return g})),Object(f.a)(n,O.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),v=Object(u.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.loginSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),x=Object(u.c)(null,(a={},Object(f.a)(a,O.registerError,(function(e,t){return t.payload})),Object(f.a)(a,O.loginError,(function(e,t){return t.payload})),Object(f.a)(a,O.logoutError,(function(e,t){return t.payload})),Object(f.a)(a,O.getCurrentUserError,(function(e,t){return t.payload})),a)),C=Object(u.c)(!1,(s={},Object(f.a)(s,O.registerSuccess,(function(){return!0})),Object(f.a)(s,O.loginSuccess,(function(){return!0})),Object(f.a)(s,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(s,O.registerError,(function(){return!1})),Object(f.a)(s,O.loginError,(function(){return!1})),Object(f.a)(s,O.getCurrentUserError,(function(){return!1})),Object(f.a)(s,O.logoutSuccess,(function(){return!1})),s)),m=Object(h.c)({isAuthenticated:C,user:p,token:v,error:x}),k=r(17),S=r.n(k),E=r(22),_=r(19),y=r.n(_);y.a.defaults.baseURL="https://connections-api.herokuapp.com/";var N=function(e){y.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){y.a.defaults.headers.common.Authorization=""},R={register:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(r){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(O.registerRequest()),t.prev=1,t.next=4,y.a.post("/users/signup",e);case 4:n=t.sent,N(n.data.token),r(O.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(O.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(r){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(O.loginRequest()),t.prev=1,t.next=4,y.a.post("/users/login",e);case 4:n=t.sent,N(n.data.token),r(O.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(O.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.logoutRequest()),e.prev=1,e.next=4,y.a.post("/users/logout");case 4:U(),t(O.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(O.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(E.a)(S.a.mark((function e(t,r){var n,c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),c=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return N(c),t(O.getCurrentUserRequest()),e.prev=5,e.next=8,y.a.get("/users/current");case 8:a=e.sent,t(O.getCurrentUserSuccess(a.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(O.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},q={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUsername:function(e){return e.auth.user.name}}}},[[108,1,2]]]);
//# sourceMappingURL=main.d629d64e.chunk.js.map